Nome do banco no capítulo 9 (locacaomidias) deveria ser "locacao_midias".
Alterar o diretório de cópia do .jar do mariadb para lib ao invés de databases.
Atualizar os modelos de banco (nomes de tabelas, atributos etc.)
Atualizar projetos para Glassfish 7.0.15
Atualizar SQL com string em bloco